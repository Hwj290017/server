cmake_minimum_required(VERSION 3.10)
project(httpserver)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_BUILD_TYPE Debug)
set(EXECUTABLE_OUTPUT_PATH  ${CMAKE_SOURCE_DIR}/bin)

include_directories(./src/tcp)
include_directories(./src/http)
include_directories(./src/examples)
include_directories(./src/rpc)
include_directories(./src/rpc/services)
include_directories(./src/util)
include_directories(./include)

aux_source_directory(./src/tcp src_tcp)
aux_source_directory(./src/http src_http)
aux_source_directory(./src/rpc src_rpc)
aux_source_directory(./src/rpc/services src_rpc_serices)
aux_source_directory(./src/util src_util)

# aux_source_directory(./src/examples src_examples)
# add_executable(tcpserver ${src_tcp} ${src_log} src/test/server.cpp)
# add_executable(tcpclient src/tcp/socket.cpp src/tcp/inetaddress.cpp src/util/util.cpp src/tcp/rwablefd.cpp src/test/client.cpp)
# add_executable(servertest ${src_tcp} src/test/servertest.cpp)
# add_executable(httpserver ${src_tcp} ${src_http} src/test/httpServerTest.cpp)
# add_executable(test ${src_tcp} ${src_http} src/test/test.cpp)
# add_executable(logtest src/test/logtest.cpp src/tcp/log.cpp)
# add_executable(fileserver ./src/test/fileservertest.cpp ./src/examples/fileserver.cpp ${src_tcp} ${src_http})

add_executable(rpcserver ${src_tcp} ${src_rpc} ${src_rpc_serices} ${src_util} ./src/rpc/test/server.cpp)
add_executable(rpcclient ${src_tcp} ${src_rpc} ${src_util} ./src/rpc/test/client.cpp)

target_link_libraries(rpcserver protobuf)
target_link_libraries(rpcclient protobuf)